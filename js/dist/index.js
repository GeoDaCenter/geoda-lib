var kn=Object.create;var Wt=Object.defineProperty;var xn=Object.getOwnPropertyDescriptor;var Un=Object.getOwnPropertyNames;var On=Object.getPrototypeOf,Vn=Object.prototype.hasOwnProperty;var kt=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(a,o)=>(typeof require<"u"?require:a)[o]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+s+'" is not supported')});var jn=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports);var Gn=(s,a,o,c)=>{if(a&&typeof a=="object"||typeof a=="function")for(let f of Un(a))!Vn.call(s,f)&&f!==o&&Wt(s,f,{get:()=>a[f],enumerable:!(c=xn(a,f))||c.enumerable});return s};var Ln=(s,a,o)=>(o=s!=null?kn(On(s)):{},Gn(a||!s||!s.__esModule?Wt(o,"default",{value:s,enumerable:!0}):o,s));var Ot=jn((Ut,Ke)=>{"use strict";var xt=(()=>{var s=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(s=s||__filename),function(a={}){var o=a,c,f;o.ready=new Promise((e,t)=>{c=e,f=t});var h=Object.assign({},o),d=[],v="./this.program",_=(e,t)=>{throw t},y=typeof window=="object",m=typeof importScripts=="function",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",P="";function S(e){return o.locateFile?o.locateFile(e,P):P+e}var T,$,M,E;if(C){var G=kt("fs"),K=kt("path");m?P=K.dirname(P)+"/":P=__dirname+"/",T=(e,t)=>(e=$e(e)?new URL(e):K.normalize(e),G.readFileSync(e,t?void 0:"utf8")),M=e=>{var t=T(e,!0);return t.buffer||(t=new Uint8Array(t)),t},$=(e,t,r,n=!0)=>{e=$e(e)?new URL(e):K.normalize(e),G.readFile(e,n?void 0:"utf8",(i,l)=>{i?r(i):t(n?l.buffer:l)})},!o.thisProgram&&process.argv.length>1&&(v=process.argv[1].replace(/\\/g,"/")),d=process.argv.slice(2),_=(e,t)=>{throw process.exitCode=e,t},o.inspect=()=>"[Emscripten Module object]"}else(y||m)&&(m?P=self.location.href:typeof document<"u"&&document.currentScript&&(P=document.currentScript.src),s&&(P=s),P.indexOf("blob:")!==0?P=P.substr(0,P.replace(/[?#].*/,"").lastIndexOf("/")+1):P="",T=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(M=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),$=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)},E=e=>document.title=e);var no=o.print||console.log.bind(console),de=o.printErr||console.error.bind(console);Object.assign(o,h),h=null,o.arguments&&(d=o.arguments),o.thisProgram&&(v=o.thisProgram),o.quit&&(_=o.quit);var ge;o.wasmBinary&&(ge=o.wasmBinary);var oo=o.noExitRuntime||!0;typeof WebAssembly!="object"&&Ce("no native wasm support detected");var _e,Qe=!1,Bt,X,k,se,me,re,I,Ye,Ze;function et(){var e=_e.buffer;o.HEAP8=X=new Int8Array(e),o.HEAP16=se=new Int16Array(e),o.HEAPU8=k=new Uint8Array(e),o.HEAPU16=me=new Uint16Array(e),o.HEAP32=re=new Int32Array(e),o.HEAPU32=I=new Uint32Array(e),o.HEAPF32=Ye=new Float32Array(e),o.HEAPF64=Ze=new Float64Array(e)}var tt,rt=[],nt=[],ot=[],qt=!1;function Kt(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Yt(o.preRun.shift());Ue(rt)}function Xt(){qt=!0,Ue(nt)}function Qt(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)er(o.postRun.shift());Ue(ot)}function Yt(e){rt.unshift(e)}function Zt(e){nt.unshift(e)}function er(e){ot.unshift(e)}var ne=0,xe=null,he=null;function tr(e){ne++,o.monitorRunDependencies&&o.monitorRunDependencies(ne)}function rr(e){if(ne--,o.monitorRunDependencies&&o.monitorRunDependencies(ne),ne==0&&(xe!==null&&(clearInterval(xe),xe=null),he)){var t=he;he=null,t()}}function Ce(e){o.onAbort&&o.onAbort(e),e="Aborted("+e+")",de(e),Qe=!0,Bt=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw f(t),t}var nr="data:application/octet-stream;base64,";function it(e){return e.startsWith(nr)}function $e(e){return e.startsWith("file://")}var ae;ae="geoda.wasm",it(ae)||(ae=S(ae));function st(e){if(e==ae&&ge)return new Uint8Array(ge);if(M)return M(e);throw"both async and sync fetching of the wasm failed"}function or(e){if(!ge&&(y||m)){if(typeof fetch=="function"&&!$e(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>st(e));if($)return new Promise((t,r)=>{$(e,n=>t(new Uint8Array(n)),r)})}return Promise.resolve().then(()=>st(e))}function at(e,t,r){return or(e).then(n=>WebAssembly.instantiate(n,t)).then(n=>n).then(r,n=>{de(`failed to asynchronously prepare wasm: ${n}`),Ce(n)})}function ir(e,t,r,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!it(t)&&!$e(t)&&!C&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var l=WebAssembly.instantiateStreaming(i,r);return l.then(n,function(p){return de(`wasm streaming compile failed: ${p}`),de("falling back to ArrayBuffer instantiation"),at(t,r,n)})}):at(t,r,n)}function sr(){var e={a:Rn};function t(n,i){var l=n.exports;return l=En(l),L=l,_e=L.x,et(),tt=L.z,Zt(L.y),rr("wasm-instantiate"),l}tr("wasm-instantiate");function r(n){t(n.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(n){de(`Module.instantiateWasm callback failed with error: ${n}`),f(n)}return ir(ge,ae,e,r).catch(f),{}}var Ue=e=>{for(;e.length>0;)e.shift()(o)},lt=[],Te=0,ut=0,ar=()=>{var e=lt.pop();e||Ce("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(lt.push(e),e.set_rethrown(!0),e.set_caught(!1),ut++),Te=t,Te};function lr(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){I[this.ptr+4>>>2>>>0]=t},this.get_type=function(){return I[this.ptr+4>>>2>>>0]},this.set_destructor=function(t){I[this.ptr+8>>>2>>>0]=t},this.get_destructor=function(){return I[this.ptr+8>>>2>>>0]},this.set_caught=function(t){t=t?1:0,X[this.ptr+12>>>0>>>0]=t},this.get_caught=function(){return X[this.ptr+12>>>0>>>0]!=0},this.set_rethrown=function(t){t=t?1:0,X[this.ptr+13>>>0>>>0]=t},this.get_rethrown=function(){return X[this.ptr+13>>>0>>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)},this.set_adjusted_ptr=function(t){I[this.ptr+16>>>2>>>0]=t},this.get_adjusted_ptr=function(){return I[this.ptr+16>>>2>>>0]},this.get_exception_ptr=function(){var t=Rt(this.get_type());if(t)return I[this.excPtr>>>2>>>0];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}function ur(e,t,r){e>>>=0,t>>>=0,r>>>=0;var n=new lr(e);throw n.init(t,r),Te=e,ut++,Te}function cr(e,t,r,n,i){e>>>=0,t>>>=0,r>>>=0}var fr=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ct=e},ct=void 0,x=e=>{for(var t="",r=e;k[r>>>0];)t+=ct[k[r++>>>0]];return t},le={},oe={},we={},ue=void 0,A=e=>{throw new ue(e)},ft=void 0,Se=e=>{throw new ft(e)},ce=(e,t,r)=>{e.forEach(function(u){we[u]=t});function n(u){var b=r(u);b.length!==e.length&&Se("Mismatched type converter count");for(var g=0;g<e.length;++g)z(e[g],b[g])}var i=new Array(t.length),l=[],p=0;t.forEach((u,b)=>{oe.hasOwnProperty(u)?i[b]=oe[u]:(l.push(u),le.hasOwnProperty(u)||(le[u]=[]),le[u].push(()=>{i[b]=oe[u],++p,p===l.length&&n(i)}))}),l.length===0&&n(i)};function pr(e,t,r={}){var n=t.name;if(e||A(`type "${n}" must have a positive integer typeid pointer`),oe.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;A(`Cannot register type '${n}' twice`)}if(oe[e]=t,delete we[e],le.hasOwnProperty(e)){var i=le[e];delete le[e],i.forEach(l=>l())}}function z(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return pr(e,t,r)}var N=8;function dr(e,t,r,n){e>>>=0,t>>>=0,t=x(t),z(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,l){return l?r:n},argPackAdvance:N,readValueFromPointer:function(i){return this.fromWireType(k[i>>>0])},destructorFunction:null})}function gr(e){if(!(this instanceof Q)||!(e instanceof Q))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i}var mr=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Oe=e=>{function t(r){return r.$$.ptrType.registeredClass.name}A(t(e)+" instance already deleted")},Ve=!1,pt=e=>{},hr=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},dt=e=>{e.count.value-=1;var t=e.count.value===0;t&&hr(e)},gt=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=gt(e,t,r.baseClass);return n===null?null:r.downcast(n)},mt={},vr=()=>Object.keys(be).length,yr=()=>{var e=[];for(var t in be)be.hasOwnProperty(t)&&e.push(be[t]);return e},ve=[],je=()=>{for(;ve.length;){var e=ve.pop();e.$$.deleteScheduled=!1,e.delete()}},ye=void 0,br=e=>{ye=e,ve.length&&ye&&ye(je)},Pr=()=>{o.getInheritedInstanceCount=vr,o.getLiveInheritedInstances=yr,o.flushPendingDeletes=je,o.setDelayFunction=br},be={},_r=(e,t)=>{for(t===void 0&&A("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Cr=(e,t)=>(t=_r(e,t),be[t]),Ae=(e,t)=>{(!t.ptrType||!t.ptr)&&Se("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Se("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Pe(Object.create(e,{$$:{value:t}}))};function $r(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Cr(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?Ae(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ae(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),p=mt[l];if(!p)return i.call(this);var u;this.isConst?u=p.constPointerType:u=p.pointerType;var b=gt(t,this.registeredClass,u.registeredClass);return b===null?i.call(this):this.isSmartPointer?Ae(u.registeredClass.instancePrototype,{ptrType:u,ptr:b,smartPtrType:this,smartPtr:e}):Ae(u.registeredClass.instancePrototype,{ptrType:u,ptr:b})}var Pe=e=>typeof FinalizationRegistry>"u"?(Pe=t=>t,e):(Ve=new FinalizationRegistry(t=>{dt(t.$$)}),Pe=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var i={$$:r};Ve.register(t,i,t)}return t},pt=t=>Ve.unregister(t),Pe(e));function Tr(){if(this.$$.ptr||Oe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Pe(Object.create(Object.getPrototypeOf(this),{$$:{value:mr(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function wr(){this.$$.ptr||Oe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),pt(this),dt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Sr(){return!this.$$.ptr}function Ar(){return this.$$.ptr||Oe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),ve.push(this),ve.length===1&&ye&&ye(je),this.$$.deleteScheduled=!0,this}var Fr=()=>{Q.prototype.isAliasOf=gr,Q.prototype.clone=Tr,Q.prototype.delete=wr,Q.prototype.isDeleted=Sr,Q.prototype.deleteLater=Ar};function Q(){}var Rr=48,Mr=57,Ge=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Rr&&t<=Mr?`_${e}`:e};function Fe(e,t){return e=Ge(e),{[e]:function(){return t.apply(this,arguments)}}[e]}var ht=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||A(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},Le=(e,t,r)=>{o.hasOwnProperty(e)?((r===void 0||o[e].overloadTable!==void 0&&o[e].overloadTable[r]!==void 0)&&A(`Cannot register public name '${e}' twice`),ht(o,e,e),o.hasOwnProperty(r)&&A(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),o[e].overloadTable[r]=t):(o[e]=t,r!==void 0&&(o[e].numArguments=r))};function Dr(e,t,r,n,i,l,p,u){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=l,this.upcast=p,this.downcast=u,this.pureVirtualFunctions=[]}var He=(e,t,r)=>{for(;t!==r;)t.upcast||A(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Ir(e,t){if(t===null)return this.isReference&&A(`null is not a valid ${this.name}`),0;t.$$||A(`Cannot pass "${Ne(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=He(t.$$.ptr,r,this.registeredClass);return n}function Er(e,t){var r;if(t===null)return this.isReference&&A(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;t.$$||A(`Cannot pass "${Ne(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&A(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=He(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&A("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:A(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,De.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:A("Unsupporting sharing policy")}return r}function Wr(e,t){if(t===null)return this.isReference&&A(`null is not a valid ${this.name}`),0;t.$$||A(`Cannot pass "${Ne(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&A(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=He(t.$$.ptr,r,this.registeredClass);return n}function vt(e){return this.fromWireType(I[e>>>2>>>0])}function kr(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function xr(e){this.rawDestructor&&this.rawDestructor(e)}var Ur=e=>{e!==null&&e.delete()},Or=()=>{B.prototype.getPointee=kr,B.prototype.destructor=xr,B.prototype.argPackAdvance=N,B.prototype.readValueFromPointer=vt,B.prototype.deleteObject=Ur,B.prototype.fromWireType=$r};function B(e,t,r,n,i,l,p,u,b,g,w){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=l,this.sharingPolicy=p,this.rawGetPointee=u,this.rawConstructor=b,this.rawShare=g,this.rawDestructor=w,!i&&t.baseClass===void 0?n?(this.toWireType=Ir,this.destructorFunction=null):(this.toWireType=Wr,this.destructorFunction=null):this.toWireType=Er}var yt=(e,t,r)=>{o.hasOwnProperty(e)||Se("Replacing nonexistant public symbol"),o[e].overloadTable!==void 0&&r!==void 0?o[e].overloadTable[r]=t:(o[e]=t,o[e].argCount=r)},Vr=(e,t,r)=>{var n=o["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)},Re=[],bt=e=>{var t=Re[e];return t||(e>=Re.length&&(Re.length=e+1),Re[e]=t=tt.get(e)),t},jr=(e,t,r)=>{if(e.includes("j"))return Vr(e,t,r);var n=bt(t).apply(null,r);return n},Gr=(e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),jr(e,t,r)}},ie=(e,t)=>{e=x(e);function r(){return e.includes("j")?Gr(e,t):bt(t)}var n=r();return typeof n!="function"&&A(`unknown function pointer with signature ${e}: ${t}`),n},Lr=(e,t)=>{var r=Fe(t,function(n){this.name=t,this.message=n;var i=new Error(n).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},Pt=void 0,_t=e=>{var t=Ft(e),r=x(t);return q(t),r},Me=(e,t)=>{var r=[],n={};function i(l){if(!n[l]&&!oe[l]){if(we[l]){we[l].forEach(i);return}r.push(l),n[l]=!0}}throw t.forEach(i),new Pt(`${e}: `+r.map(_t).join([", "]))};function Hr(e,t,r,n,i,l,p,u,b,g,w,F,D){e>>>=0,t>>>=0,r>>>=0,n>>>=0,i>>>=0,l>>>=0,p>>>=0,u>>>=0,b>>>=0,g>>>=0,w>>>=0,F>>>=0,D>>>=0,w=x(w),l=ie(i,l),u&&(u=ie(p,u)),g&&(g=ie(b,g)),D=ie(F,D);var R=Ge(w);Le(R,function(){Me(`Cannot construct ${w} due to unbound types`,[n])}),ce([e,t,r],n?[n]:[],function(U){U=U[0];var j,O;n?(j=U.registeredClass,O=j.instancePrototype):O=Q.prototype;var Y=Fe(R,function(){if(Object.getPrototypeOf(this)!==qe)throw new ue("Use 'new' to construct "+w);if(H.constructor_body===void 0)throw new ue(w+" has no accessible constructor");var Et=H.constructor_body[arguments.length];if(Et===void 0)throw new ue(`Tried to invoke ctor of ${w} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(H.constructor_body).toString()}) parameters instead!`);return Et.apply(this,arguments)}),qe=Object.create(O,{constructor:{value:Y}});Y.prototype=qe;var H=new Dr(w,Y,qe,D,j,l,u,g);H.baseClass&&(H.baseClass.__derivedClasses===void 0&&(H.baseClass.__derivedClasses=[]),H.baseClass.__derivedClasses.push(H));var Wn=new B(w,H,!0,!1,!1),Dt=new B(w+"*",H,!1,!1,!1),It=new B(w+" const*",H,!1,!0,!1);return mt[e]={pointerType:Dt,constPointerType:It},yt(R,Y),[Wn,Dt,It]})}var Je=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(I[t+n*4>>>2>>>0]);return r},Jr=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function zr(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=Fe(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return i instanceof Object?i:n}function ze(e,t,r,n,i,l){var p=t.length;p<2&&A("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=t[1]!==null&&r!==null,b=!1,g=1;g<t.length;++g)if(t[g]!==null&&t[g].destructorFunction===void 0){b=!0;break}for(var w=t[0].name!=="void",F="",D="",g=0;g<p-2;++g)F+=(g!==0?", ":"")+"arg"+g,D+=(g!==0?", ":"")+"arg"+g+"Wired";var R=`
        return function ${Ge(e)}(${F}) {
        if (arguments.length !== ${p-2}) {
          throwBindingError('function ${e} called with ' + arguments.length + ' arguments, expected ${p-2}');
        }`;b&&(R+=`var destructors = [];
`);var U=b?"destructors":"null",j=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],O=[A,n,i,Jr,t[0],t[1]];u&&(R+="var thisWired = classParam.toWireType("+U+`, this);
`);for(var g=0;g<p-2;++g)R+="var arg"+g+"Wired = argType"+g+".toWireType("+U+", arg"+g+"); // "+t[g+2].name+`
`,j.push("argType"+g),O.push(t[g+2]);if(u&&(D="thisWired"+(D.length>0?", ":"")+D),R+=(w||l?"var rv = ":"")+"invoker(fn"+(D.length>0?", ":"")+D+`);
`,b)R+=`runDestructors(destructors);
`;else for(var g=u?1:2;g<t.length;++g){var Y=g===1?"thisWired":"arg"+(g-2)+"Wired";t[g].destructorFunction!==null&&(R+=Y+"_dtor("+Y+"); // "+t[g].name+`
`,j.push(Y+"_dtor"),O.push(t[g].destructorFunction))}return w&&(R+=`var ret = retType.fromWireType(rv);
return ret;
`),R+=`}
`,j.push(R),zr(Function,j).apply(null,O)}function Nr(e,t,r,n,i,l){e>>>=0,r>>>=0,n>>>=0,i>>>=0,l>>>=0;var p=Je(t,r);i=ie(n,i),ce([],[e],function(u){u=u[0];var b=`constructor ${u.name}`;if(u.registeredClass.constructor_body===void 0&&(u.registeredClass.constructor_body=[]),u.registeredClass.constructor_body[t-1]!==void 0)throw new ue(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${u.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return u.registeredClass.constructor_body[t-1]=()=>{Me(`Cannot construct ${u.name} due to unbound types`,p)},ce([],p,g=>(g.splice(1,0,null),u.registeredClass.constructor_body[t-1]=ze(b,g,null,i,l),[])),[]})}function Br(e,t,r,n,i,l,p,u,b){e>>>=0,t>>>=0,n>>>=0,i>>>=0,l>>>=0,p>>>=0;var g=Je(r,n);t=x(t),l=ie(i,l),ce([],[e],function(w){w=w[0];var F=`${w.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),u&&w.registeredClass.pureVirtualFunctions.push(t);function D(){Me(`Cannot call ${F} due to unbound types`,g)}var R=w.registeredClass.instancePrototype,U=R[t];return U===void 0||U.overloadTable===void 0&&U.className!==w.name&&U.argCount===r-2?(D.argCount=r-2,D.className=w.name,R[t]=D):(ht(R,t,F),R[t].overloadTable[r-2]=D),ce([],g,function(j){var O=ze(F,j,w,l,p,b);return R[t].overloadTable===void 0?(O.argCount=r-2,R[t]=O):R[t].overloadTable[r-2]=O,[]}),[]})}function qr(){Object.assign(Ct.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function Ct(){this.allocated=[void 0],this.freelist=[]}var V=new Ct;function $t(e){e>>>=0,e>=V.reserved&&--V.get(e).refcount===0&&V.free(e)}var Kr=()=>{for(var e=0,t=V.reserved;t<V.allocated.length;++t)V.allocated[t]!==void 0&&++e;return e},Xr=()=>{V.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),V.reserved=V.allocated.length,o.count_emval_handles=Kr},De={toValue:e=>(e||A("Cannot use deleted val. handle = "+e),V.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return V.allocate({refcount:1,value:e})}}};function Tt(e){return this.fromWireType(re[e>>>2>>>0])}var Qr=function(e,t){e>>>=0,t>>>=0,t=x(t),z(e,{name:t,fromWireType:r=>{var n=De.toValue(r);return $t(r),n},toWireType:(r,n)=>De.toHandle(n),argPackAdvance:N,readValueFromPointer:Tt,destructorFunction:null})},Yr=(e,t,r)=>{switch(t){case 1:return r?function(n){return this.fromWireType(X[n>>>0>>>0])}:function(n){return this.fromWireType(k[n>>>0>>>0])};case 2:return r?function(n){return this.fromWireType(se[n>>>1>>>0])}:function(n){return this.fromWireType(me[n>>>1>>>0])};case 4:return r?function(n){return this.fromWireType(re[n>>>2>>>0])}:function(n){return this.fromWireType(I[n>>>2>>>0])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function Zr(e,t,r,n){e>>>=0,t>>>=0,r>>>=0,t=x(t);function i(){}i.values={},z(e,{name:t,constructor:i,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,p)=>p.value,argPackAdvance:N,readValueFromPointer:Yr(t,r,n),destructorFunction:null}),Le(t,i)}var wt=(e,t)=>{var r=oe[e];return r===void 0&&A(t+" has unknown type "+_t(e)),r};function en(e,t,r){e>>>=0,t>>>=0,r>>>=0;var n=wt(e,"enum");t=x(t);var i=n.constructor,l=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Fe(`${n.name}_${t}`,function(){})}});i.values[r]=l,i[t]=l}var Ne=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},tn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(Ye[r>>>2>>>0])};case 8:return function(r){return this.fromWireType(Ze[r>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},rn=function(e,t,r){e>>>=0,t>>>=0,r>>>=0,t=x(t),z(e,{name:t,fromWireType:n=>n,toWireType:(n,i)=>i,argPackAdvance:N,readValueFromPointer:tn(t,r),destructorFunction:null})};function nn(e,t,r,n,i,l,p){e>>>=0,r>>>=0,n>>>=0,i>>>=0,l>>>=0;var u=Je(t,r);e=x(e),i=ie(n,i),Le(e,function(){Me(`Cannot call ${e} due to unbound types`,u)},t-1),ce([],u,function(b){var g=[b[0],null].concat(b.slice(1));return yt(e,ze(e,g,null,i,l,p),t-1),[]})}var on=(e,t,r)=>{switch(t){case 1:return r?n=>X[n>>>0>>>0]:n=>k[n>>>0>>>0];case 2:return r?n=>se[n>>>1>>>0]:n=>me[n>>>1>>>0];case 4:return r?n=>re[n>>>2>>>0]:n=>I[n>>>2>>>0];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function sn(e,t,r,n,i){e>>>=0,t>>>=0,r>>>=0,t=x(t),i===-1&&(i=4294967295);var l=w=>w;if(n===0){var p=32-8*r;l=w=>w<<p>>>p}var u=t.includes("unsigned"),b=(w,F)=>{},g;u?g=function(w,F){return b(F,this.name),F>>>0}:g=function(w,F){return b(F,this.name),F},z(e,{name:t,fromWireType:l,toWireType:g,argPackAdvance:N,readValueFromPointer:on(t,r,n!==0),destructorFunction:null})}function an(e,t,r){e>>>=0,r>>>=0;var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=n[t];function l(p){var u=I[p>>>2>>>0],b=I[p+4>>>2>>>0];return new i(X.buffer,b,u)}r=x(r),z(e,{name:r,fromWireType:l,argPackAdvance:N,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})}var ln=(e,t,r,n)=>{if(r>>>=0,!(n>0))return 0;for(var i=r,l=r+n-1,p=0;p<e.length;++p){var u=e.charCodeAt(p);if(u>=55296&&u<=57343){var b=e.charCodeAt(++p);u=65536+((u&1023)<<10)|b&1023}if(u<=127){if(r>=l)break;t[r++>>>0]=u}else if(u<=2047){if(r+1>=l)break;t[r++>>>0]=192|u>>6,t[r++>>>0]=128|u&63}else if(u<=65535){if(r+2>=l)break;t[r++>>>0]=224|u>>12,t[r++>>>0]=128|u>>6&63,t[r++>>>0]=128|u&63}else{if(r+3>=l)break;t[r++>>>0]=240|u>>18,t[r++>>>0]=128|u>>12&63,t[r++>>>0]=128|u>>6&63,t[r++>>>0]=128|u&63}}return t[r>>>0]=0,r-i},un=(e,t,r)=>ln(e,k,t,r),cn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},St=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,fn=(e,t,r)=>{t>>>=0;for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&St)return St.decode(e.subarray(t,i));for(var l="";t<i;){var p=e[t++];if(!(p&128)){l+=String.fromCharCode(p);continue}var u=e[t++]&63;if((p&224)==192){l+=String.fromCharCode((p&31)<<6|u);continue}var b=e[t++]&63;if((p&240)==224?p=(p&15)<<12|u<<6|b:p=(p&7)<<18|u<<12|b<<6|e[t++]&63,p<65536)l+=String.fromCharCode(p);else{var g=p-65536;l+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return l},pn=(e,t)=>(e>>>=0,e?fn(k,e,t):""),dn=function(e,t){e>>>=0,t>>>=0,t=x(t);var r=t==="std::string";z(e,{name:t,fromWireType:n=>{var i=I[n>>>2>>>0],l=n+4,p;if(r)for(var u=l,b=0;b<=i;++b){var g=l+b;if(b==i||k[g>>>0]==0){var w=g-u,F=pn(u,w);p===void 0?p=F:(p+=String.fromCharCode(0),p+=F),u=g+1}}else{for(var D=new Array(i),b=0;b<i;++b)D[b]=String.fromCharCode(k[l+b>>>0]);p=D.join("")}return q(n),p},toWireType:(n,i)=>{i instanceof ArrayBuffer&&(i=new Uint8Array(i));var l,p=typeof i=="string";p||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||A("Cannot pass non-string to std::string"),r&&p?l=cn(i):l=i.length;var u=Be(4+l+1),b=u+4;if(I[u>>>2>>>0]=l,r&&p)un(i,b,l+1);else if(p)for(var g=0;g<l;++g){var w=i.charCodeAt(g);w>255&&(q(b),A("String has UTF-16 code units that do not fit in 8 bits")),k[b+g>>>0]=w}else for(var g=0;g<l;++g)k[b+g>>>0]=i[g];return n!==null&&n.push(q,u),u},argPackAdvance:N,readValueFromPointer:vt,destructorFunction:n=>q(n)})},At=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,gn=(e,t)=>{for(var r=e,n=r>>1,i=n+t/2;!(n>=i)&&me[n>>>0];)++n;if(r=n<<1,r-e>32&&At)return At.decode(k.subarray(e>>>0,r>>>0));for(var l="",p=0;!(p>=t/2);++p){var u=se[e+p*2>>>1>>>0];if(u==0)break;l+=String.fromCharCode(u)}return l},mn=(e,t,r)=>{if(r===void 0&&(r=2147483647),r<2)return 0;r-=2;for(var n=t,i=r<e.length*2?r/2:e.length,l=0;l<i;++l){var p=e.charCodeAt(l);se[t>>>1>>>0]=p,t+=2}return se[t>>>1>>>0]=0,t-n},hn=e=>e.length*2,vn=(e,t)=>{for(var r=0,n="";!(r>=t/4);){var i=re[e+r*4>>>2>>>0];if(i==0)break;if(++r,i>=65536){var l=i-65536;n+=String.fromCharCode(55296|l>>10,56320|l&1023)}else n+=String.fromCharCode(i)}return n},yn=(e,t,r)=>{if(t>>>=0,r===void 0&&(r=2147483647),r<4)return 0;for(var n=t,i=n+r-4,l=0;l<e.length;++l){var p=e.charCodeAt(l);if(p>=55296&&p<=57343){var u=e.charCodeAt(++l);p=65536+((p&1023)<<10)|u&1023}if(re[t>>>2>>>0]=p,t+=4,t+4>i)break}return re[t>>>2>>>0]=0,t-n},bn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},Pn=function(e,t,r){e>>>=0,t>>>=0,r>>>=0,r=x(r);var n,i,l,p,u;t===2?(n=gn,i=mn,p=hn,l=()=>me,u=1):t===4&&(n=vn,i=yn,p=bn,l=()=>I,u=2),z(e,{name:r,fromWireType:b=>{for(var g=I[b>>>2>>>0],w=l(),F,D=b+4,R=0;R<=g;++R){var U=b+4+R*t;if(R==g||w[U>>>u]==0){var j=U-D,O=n(D,j);F===void 0?F=O:(F+=String.fromCharCode(0),F+=O),D=U+t}}return q(b),F},toWireType:(b,g)=>{typeof g!="string"&&A(`Cannot pass non-string to C++ string type ${r}`);var w=p(g),F=Be(4+w+t);return I[F>>>2]=w>>u,i(g,F+4,w+t),b!==null&&b.push(q,F),F},argPackAdvance:N,readValueFromPointer:Tt,destructorFunction:b=>q(b)})},_n=function(e,t){e>>>=0,t>>>=0,t=x(t),z(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})};function Cn(e){e>>>=0,e>4&&(V.get(e).refcount+=1)}function $n(e,t){e>>>=0,t>>>=0,e=wt(e,"_emval_take_value");var r=e.readValueFromPointer(t);return De.toHandle(r)}var Tn=()=>{Ce("")};function wn(e,t,r){return e>>>=0,t>>>=0,r>>>=0,k.copyWithin(e>>>0,t>>>0,t+r>>>0)}var Sn=()=>3221225472,An=e=>{var t=_e.buffer,r=(e-t.byteLength+65535)/65536;try{return _e.grow(r),et(),1}catch{}};function Fn(e){e>>>=0;var t=k.length,r=Sn();if(e>r)return!1;for(var n=(b,g)=>b+(g-b%g)%g,i=1;i<=4;i*=2){var l=t*(1+.2/i);l=Math.min(l,e+100663296);var p=Math.min(r,n(Math.max(e,l),65536)),u=An(p);if(u)return!0}return!1}fr(),ue=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},ft=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Fr(),Pr(),Or(),Pt=o.UnboundTypeError=Lr(Error,"UnboundTypeError"),qr(),Xr();var Rn={w:ar,b:ur,o:cr,t:dr,d:Hr,e:Nr,a:Br,s:Qr,q:Zr,i:en,m:rn,f:nn,g:sn,c:an,l:dn,j:Pn,u:_n,v:$t,n:Cn,h:$n,k:Tn,r:wn,p:Fn},L=sr(),Mn=()=>(Mn=L.y)(),Ft=e=>(Ft=L.A)(e),Dn=o.__embind_initialize_bindings=()=>(Dn=o.__embind_initialize_bindings=L.B)(),In=()=>(In=L.__errno_location)(),Be=e=>(Be=L.C)(e),q=e=>(q=L.D)(e),Rt=e=>(Rt=L.E)(e);function En(e){e=Object.assign({},e);var t=n=>i=>n(i)>>>0,r=n=>()=>n()>>>0;return e.A=t(e.A),e.__errno_location=r(e.__errno_location),e.C=t(e.C),e.stackSave=r(e.stackSave),e.stackAlloc=t(e.stackAlloc),e}var Ie;he=function e(){Ie||Mt(),Ie||(he=e)};function Mt(){if(ne>0||(Kt(),ne>0))return;function e(){Ie||(Ie=!0,o.calledRun=!0,!Qe&&(Xt(),c(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),Qt()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Mt(),a.ready}})();typeof Ut=="object"&&typeof Ke=="object"?Ke.exports=xt:typeof define=="function"&&define.amd&&define([],()=>xt)});var Vt=Ln(Ot(),1),jt=Vt.default,Ee=null;async function W(){return Ee===null&&(Ee=jt()),Ee}function Hn(){Ee=null,We=null,jt().then(s=>{We=s})}var We=null;function Jn(s){We=s}function Z(){return We}function J(s,a,o,c){let f=0,h=new a.VectorDouble,d=new a.VectorDouble,v=new a.VectorUInt,_=new a.VectorUInt,y=new a.VectorUInt;function m(P,S){v.push_back(f),_.push_back(0);for(let T=0,$=P.length;T<$;++T){let M=P[T];T>0&&(v.push_back(f),_.push_back(1)),M.length>0&&(S+=1);for(let E=0,G=M.length;E<G;++E){let K=M[E];h.push_back(K[0]),d.push_back(K[1]),f+=1}}return S}for(let P=0,S=s.length;P<S;++P){let T=s[P],$=0;if(T.geometry.type==="MultiPolygon")for(let M=0,E=T.geometry.coordinates.length;M<E;++M){let G=T.geometry.coordinates[M];$=m(G,$)}else T.geometry.type==="Polygon"&&($=m(T.geometry.coordinates,$));y.push_back($)}return new a.PolygonCollection(h,d,v,_,y,o??!1,c??!1)}function fe(s,a,o){let c=0,f=new a.VectorDouble,h=new a.VectorDouble,d=new a.VectorUInt,v=new a.VectorUInt;function _(m){d.push_back(c);let C=!1;for(let P=0,S=m.length;P<S;++P){let T=m[P];f.push_back(T[0]),h.push_back(T[1]),c+=1,C=!0}return C}for(let m=0,C=s.length;m<C;++m){let P=s[m],S=0;if(P.geometry.type==="MultiLineString")for(let T=0,$=P.geometry.coordinates.length;T<$;++T)_(P.geometry.coordinates[T])&&(S+=1);else P.geometry.type==="LineString"&&_(P.geometry.coordinates)&&(S+=1);v.push_back(S)}return new a.LineCollection(f,h,d,v,o??!1)}function ee(s,a,o){let c=0,f=new a.VectorDouble,h=new a.VectorDouble,d=new a.VectorUInt,v=new a.VectorUInt;function _(m){let C=!1;return m.length>=2&&(f.push_back(m[0]),h.push_back(m[1]),C=!0),c+=1,C}for(let m=0,C=s.length;m<C;++m){let P=s[m],S=0;if(P.geometry.type==="MultiPoint"){d.push_back(c);for(let T=0,$=P.geometry.coordinates.length;T<$;++T)_(P.geometry.coordinates[T])&&(S+=1)}else P.geometry.type==="Point"&&(d.push_back(c),_(P.geometry.coordinates)&&(S+=1));v.push_back(S)}return new a.PointCollection(f,h,d,v,o??!1)}function Xe(s,a,o,c,f){let h=0,d=new o.VectorDouble,v=new o.VectorDouble,_=new o.VectorUInt,y=new o.VectorUInt;for(let P=c??0,S=f??s.length;P<S;++P)y.push_back(1),_.push_back(h),d.push_back(a[P]),v.push_back(s[P]),h+=1;let m=!1;return new o.PointCollection(d,v,_,y,m)}function te(s,a,o,c){if(s.features&&s.features.length>0){let f=s.features[0].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return J(s.features,a);if(f==="LineString"||f==="MultiLineString")return fe(s.features,a);if(f==="Point"||f==="MultiPoint")return ee(s.features,a)}else if(s.latitudes&&s.longitudes)return Xe(s.latitudes,s.longitudes,a,o,c);return null}function ke(s){let a=s.getX(),o=s.getY(),c=s.getParts(),f=s.getHoles(),h=a.size(),d=c.size(),v=0;for(let y=0;y<d;++y)f.get(y)===0&&(v+=1);if(v>1){let y=Array(v),m=-1;for(let C=0;C<d;++C){f.get(C)===0&&(m+=1,y[m]=[]);let P=[],S=c.get(C),T=C===d-1?h:c.get(C+1);for(let $=S;$<T;++$)P.push([a.get($),o.get($)]);y[m].push(P)}return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:y},properties:{}}}else{let y=Array(d);for(let m=0;m<d;++m){let C=[],P=c.get(m),S=m===d-1?h:c.get(m+1);for(let T=P;T<S;++T)C.push([a.get(T),o.get(T)]);y[m]=C}return{type:"Feature",geometry:{type:"Polygon",coordinates:y},properties:{}}}}async function po(s){let a=await W(),o=J(s,a),c=a.getCentroids(o),f=c.size(),h=[];for(let d=0;d<f;++d)c.get(d).size()===0?h.push(null):h.push({type:"Feature",geometry:{type:"Point",coordinates:[c.get(d).get(0),c.get(d).get(1)]},properties:{}});return o.delete(),h}function go(s){let a=Z();if(!a||!s)return null;let o=s?.geometry?.type,c;if(o==="Polygon"||o==="MultiPolygon")c=J([s],a);else if(o==="LineString"||o==="MultiLineString")c=fe([s],a);else if(o==="Point"||o==="MultiPoint")c=ee([s],a);else return null;let f=a.getCentroids(c);return c.delete(),f.size()>0&&f.get(0).size()===2?[f.get(0).get(0),f.get(0).get(1)]:null}function mo(s){let a=[],o=Z();if(!o)return a;let c=s.length,f=[],h=[];a=Array(c).fill(null);let d=null;for(let y=0;y<c;++y){let m=s[y],C=m?.geometry?.type;C&&(d||(d=C),(d.indexOf(C)>=0||C.indexOf(d)>=0)&&(f.push(y),h.push(m)))}let v=d==="Polygon"||d==="MultiPolygon"?J(h,o):d==="LineString"||d==="MultiLineString"?fe(h,o):d==="Point"||d==="MultiPoint"?ee(h,o):null;if(!v)return a;let _=o.getCentroids(v);v.delete();for(let y=0,m=_.size();y<m;++y)_.get(y).size()===0?a[f[y]]=null:a[f[y]]=[_.get(y)?.get(0),_.get(y)?.get(1)];return a}var zn=(o=>(o.Mile="Mile",o.KM="KM",o))(zn||{});async function bo({distanceUnit:s,geometries:a,latLngArrays:o}){let c=a?.length??o?.latitudes.length??0,f=0,h=0,d=0;if(c===0)return{minDistanceThreshold:f,suggestedDistanceThreshold:h,maxDistanceThreshold:d};let v=await W(),_=te({features:a??null,latitudes:o?.latitudes??null,longitudes:o?.longitudes??null},v);if(_){let y=v.getDistanceThresholds(_,s==="Mile");f=y.get(0),h=y.get(1),d=y.get(2)}return{minDistanceThreshold:f,suggestedDistanceThreshold:h,maxDistanceThreshold:d}}async function Po({distanceThreshold:s,distanceUnit:a,geometries:o,latLngArrays:c}){let f=o?.length??c?.latitudes.length??0,h=Array(f);if(f===0)return h;let d=await W(),v=te({features:o??null,latitudes:c?.latitudes??null,longitudes:c?.longitudes??null},d);if(v){let _=d.getDistanceWeights(v,s,a==="Mile");for(let y=0;y<f;++y){let m=_.get(y),C=Array(m.size());for(let P=0,S=m.size();P<S;++P)C[P]=m.get(P);h[y]=C}}return h}var Nn=1609.344;function Gt(s,a){return a==="Mile"?s*Nn:s*1e3}function Bn(s,a,o,c,f){let h=s.length,d=Array(h).fill(null),v=f??Z();if(!v)return d;let _=[],y=[],m=null;for(let $=0;$<h;++$){let M=s[$],E=M?.geometry?.type;E&&(m||(m=E),(m.indexOf(E)>=0||E.indexOf(m)>=0)&&(_.push($),y.push(M)))}let C=!0,S=m==="Polygon"||m==="MultiPolygon"?J(y,v,!0,C):m==="LineString"||m==="MultiLineString"?fe(y,v,C):m==="Point"||m==="MultiPoint"?ee(y,v,C):null;if(!S)return d;let T=Gt(a,o);for(let $=0,M=y.length;$<M;++$){let E=_[$],G=S.buffer($,T,c),K=ke(G);d[E]=K}return S.delete(),d}function So(s,a,o,c,f){return Bn([s],a,o,c,f)[0]}var Lt=(d=>(d.INTERSECTS="INTERSECTS",d.WITHIN="WITHIN",d.TOUCHES="TOUCHES",d.OVERLAPS="OVERLAPS",d.CROSSES="CROSSES",d.EQUALS="EQUALS",d))(Lt||{});async function qn(s,a,o){let c=await W();return Kn(s,a,o,c)}function Kn(s,a,o,c,f,h){let d=te(s,c,f,h),v=te(a,c,f,h),_=c.SpatialJoinType[o];if(d&&v&&_){let y=c.spatialJoin(d,v,_),m=[];for(let C=0,P=y.size();C<P;++C){let S=y.get(C),T=[];for(let $=0,M=S.size();$<M;++$)T.push(S.get($));m.push(T)}return m}return null}function Jt(s,a,o,c){let f=[],h=s.features?.length??s.latitudes?.length,d=a.features?.length??a.latitudes?.length;if(!h||!d)return null;let v=h<d,_=v?d:h,y=Math.floor(_/c),m=_%c,C=new Array(c),P=S=>{let T=S*y,$=(S+1)*y;return S===c-1&&($+=m),C[S]=T,{id:S,source:Ht(s,v,T,$),join:Ht(a,!v,T,$),spatialJoinOperation:o,start:T,end:$}};for(let S=0;S<c;++S){let T=P(S);f.push(T)}return{taskDataArray:f,indexTable:C,sourceSize:h,joinSize:d,divideRight:v}}function Ht(s,a,o,c){return{...s.latitudes?{latitudes:s.latitudes}:{},...s.longitudes?{longitudes:s.longitudes}:{},features:s.features?.length&&s.features.length>0?a?s.features:s.features?.slice(o,c):null}}function zt(s,a,o,c,f){for(let h=0,d=s.length;h<d;++h){let v=s[h];for(let _=0,y=v.length;_<y;++_)a?f[h].push(o[c]+v[_]):f[o[c]+h].push(v[_])}}var Xn=6;async function Qn(s,a,o,c){let f=c?.workerCount??Xn,h=Jt(s,a,o,f);if(!h)return null;let{sourceSize:d,divideRight:v,indexTable:_,taskDataArray:y}=h,m=[];for(let $=0;$<d;++$)m.push([]);let C=0,P,S=$=>{C--;let{result:M,id:E}=$.data;zt(M,v,_,E,m),C===0&&P(m)},T=$=>{for(let M=0;M<f;++M){let E=y[M],G=new Worker(new URL(c.workerUrl));G.onmessage=S,G.postMessage(E),C++}P=$};return new Promise(T)}async function Yn(s){let a=await W();return Nt(s,a)}function Nt(s,a){let o=a??Z();if(!o)return{type:"Feature",geometry:{type:"Polygon",coordinates:[]},properties:{}};let f=J(s,o,!0),h=o.spatialUnion(f);return ke(h)}async function Zn(s,a){let o=s.length,c=Array(o);if(o===0)return c;let f=await W(),h=J(s,f),d;if(a.features)d=ee(a.features,f);else if(a.latitudes&&a.longitudes)d=Xe(a.latitudes,a.longitudes,f);else return c;let v=f.spatialCount(h,d);for(let _=0;_<o;++_)c[_]=v.get(_);return c}async function eo({k:s,geometries:a,latLngArrays:o}){let c=a?a.length:o?o.latitudes.length:0,f=Array(c);if(c===0)return f;let h=await W(),d=te({features:a??null,latitudes:o?.latitudes??null,longitudes:o?.longitudes??null},h);if(d){let v=h.getNearestNeighbors(d,s);for(let _=0;_<c;++_){let y=v.get(_),m=Array(y.size());for(let C=0,P=y.size();C<P;++C)m[C]=y.get(C);f[_]=m}}return f}async function to(s,a,o){let c=await W(),f=s.length,h=new c.VectorDouble;h.resize(f,0);for(let _=0;_<f;++_)h.set(_,s[_]);let d=new c.VecVecUInt;for(let _=0;_<f;++_){let y=a[_],m=new c.VectorUInt;for(let C=0,P=y.length;C<P;++C)m.push_back(y[C]);d.push_back(m)}let v=c.localMoran(h,d,o);return{isValid:v.isValid(),clusters:pe(v.getClusters()),lagValues:pe(v.getLagValues()),lisaValues:pe(v.getLisaValues()),pValues:pe(v.getPValues())}}function pe(s){let a=[],o=s.size();for(let c=0;c<o;++c)a.push(s.get(c));return a}async function ro(s,a){let o=await W(),c=a.length,f=new o.VectorInt;f.resize(c,0);let h=new o.VectorDouble;h.resize(c,0);for(let v=0;v<c;++v)h.set(v,a[v]),(a[v]===void 0||a[v]===null)&&f.set(v,1);let d=o.quantileBreaks(s,h,f);return pe(d)}export{zn as DistanceUnit,Lt as SpatialJoinType,So as getBufferSync,Bn as getBuffersSync,go as getCentroid,po as getCentroids,Po as getDistanceBasedNeighbors,bo as getDistanceThresholds,Z as getGeoDa,mo as getGeojsonCentroids,eo as getNearestNeighbors,W as initGeoDa,to as localMoran,Qn as parallelSpatialJoin,ro as quantileBreaks,Hn as resetGeoDa,Jn as setGeoDa,Zn as spatialCount,qn as spatialJoin,Yn as spatialMerge,Nt as spatialMergeSync};
//# sourceMappingURL=index.js.map
