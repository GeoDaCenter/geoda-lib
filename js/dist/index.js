var xn=Object.create;var Et=Object.defineProperty;var Wn=Object.getOwnPropertyDescriptor;var Un=Object.getOwnPropertyNames;var Vn=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty;var xt=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(i,o)=>(typeof require<"u"?require:i)[o]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+a+'" is not supported')});var jn=(a,i)=>()=>(i||a((i={exports:{}}).exports,i),i.exports);var Gn=(a,i,o,c)=>{if(i&&typeof i=="object"||typeof i=="function")for(let u of Un(i))!On.call(a,u)&&u!==o&&Et(a,u,{get:()=>i[u],enumerable:!(c=Wn(i,u))||c.enumerable});return a};var Ln=(a,i,o)=>(o=a!=null?xn(Vn(a)):{},Gn(i||!a||!a.__esModule?Et(o,"default",{value:a,enumerable:!0}):o,a));var Vt=jn((Ut,Ke)=>{"use strict";var Wt=(()=>{var a=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(a=a||__filename),function(i={}){var o=i,c,u;o.ready=new Promise((e,t)=>{c=e,u=t});var h=Object.assign({},o),p=[],y="./this.program",P=(e,t)=>{throw t},b=typeof window=="object",v=typeof importScripts=="function",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",m="";function S(e){return o.locateFile?o.locateFile(e,m):m+e}var $,T,M,E;if(C){var G=xt("fs"),K=xt("path");v?m=K.dirname(m)+"/":m=__dirname+"/",$=(e,t)=>(e=Te(e)?new URL(e):K.normalize(e),G.readFileSync(e,t?void 0:"utf8")),M=e=>{var t=$(e,!0);return t.buffer||(t=new Uint8Array(t)),t},T=(e,t,r,n=!0)=>{e=Te(e)?new URL(e):K.normalize(e),G.readFile(e,n?void 0:"utf8",(s,l)=>{s?r(s):t(n?l.buffer:l)})},!o.thisProgram&&process.argv.length>1&&(y=process.argv[1].replace(/\\/g,"/")),p=process.argv.slice(2),P=(e,t)=>{throw process.exitCode=e,t},o.inspect=()=>"[Emscripten Module object]"}else(b||v)&&(v?m=self.location.href:typeof document<"u"&&document.currentScript&&(m=document.currentScript.src),a&&(m=a),m.indexOf("blob:")!==0?m=m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):m="",$=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},v&&(M=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),T=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)},E=e=>document.title=e);var io=o.print||console.log.bind(console),de=o.printErr||console.error.bind(console);Object.assign(o,h),h=null,o.arguments&&(p=o.arguments),o.thisProgram&&(y=o.thisProgram),o.quit&&(P=o.quit);var ge;o.wasmBinary&&(ge=o.wasmBinary);var so=o.noExitRuntime||!0;typeof WebAssembly!="object"&&Ce("no native wasm support detected");var _e,Qe=!1,Nt,X,x,ae,me,ne,k,Ye,Ze;function et(){var e=_e.buffer;o.HEAP8=X=new Int8Array(e),o.HEAP16=ae=new Int16Array(e),o.HEAPU8=x=new Uint8Array(e),o.HEAPU16=me=new Uint16Array(e),o.HEAP32=ne=new Int32Array(e),o.HEAPU32=k=new Uint32Array(e),o.HEAPF32=Ye=new Float32Array(e),o.HEAPF64=Ze=new Float64Array(e)}var tt,rt=[],nt=[],ot=[],qt=!1;function Kt(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Yt(o.preRun.shift());Ue(rt)}function Xt(){qt=!0,Ue(nt)}function Qt(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)er(o.postRun.shift());Ue(ot)}function Yt(e){rt.unshift(e)}function Zt(e){nt.unshift(e)}function er(e){ot.unshift(e)}var oe=0,We=null,he=null;function tr(e){oe++,o.monitorRunDependencies&&o.monitorRunDependencies(oe)}function rr(e){if(oe--,o.monitorRunDependencies&&o.monitorRunDependencies(oe),oe==0&&(We!==null&&(clearInterval(We),We=null),he)){var t=he;he=null,t()}}function Ce(e){o.onAbort&&o.onAbort(e),e="Aborted("+e+")",de(e),Qe=!0,Nt=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}var nr="data:application/octet-stream;base64,";function it(e){return e.startsWith(nr)}function Te(e){return e.startsWith("file://")}var le;le="../../../../../geoda.wasm",it(le)||(le=S(le));function st(e){if(e==le&&ge)return new Uint8Array(ge);if(M)return M(e);throw"both async and sync fetching of the wasm failed"}function or(e){if(!ge&&(b||v)){if(typeof fetch=="function"&&!Te(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>st(e));if(T)return new Promise((t,r)=>{T(e,n=>t(new Uint8Array(n)),r)})}return Promise.resolve().then(()=>st(e))}function at(e,t,r){return or(e).then(n=>WebAssembly.instantiate(n,t)).then(n=>n).then(r,n=>{de(`failed to asynchronously prepare wasm: ${n}`),Ce(n)})}function ir(e,t,r,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!it(t)&&!Te(t)&&!C&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var l=WebAssembly.instantiateStreaming(s,r);return l.then(n,function(d){return de(`wasm streaming compile failed: ${d}`),de("falling back to ArrayBuffer instantiation"),at(t,r,n)})}):at(t,r,n)}function sr(){var e={a:In};function t(n,s){var l=n.exports;return l=kn(l),L=l,_e=L.x,et(),tt=L.z,Zt(L.y),rr("wasm-instantiate"),l}tr("wasm-instantiate");function r(n){t(n.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(n){de(`Module.instantiateWasm callback failed with error: ${n}`),u(n)}return ir(ge,le,e,r).catch(u),{}}var Ue=e=>{for(;e.length>0;)e.shift()(o)},lt=[],$e=0,ut=0,ar=()=>{var e=lt.pop();e||Ce("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(lt.push(e),e.set_rethrown(!0),e.set_caught(!1),ut++),$e=t,$e};function lr(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){k[this.ptr+4>>>2>>>0]=t},this.get_type=function(){return k[this.ptr+4>>>2>>>0]},this.set_destructor=function(t){k[this.ptr+8>>>2>>>0]=t},this.get_destructor=function(){return k[this.ptr+8>>>2>>>0]},this.set_caught=function(t){t=t?1:0,X[this.ptr+12>>>0>>>0]=t},this.get_caught=function(){return X[this.ptr+12>>>0>>>0]!=0},this.set_rethrown=function(t){t=t?1:0,X[this.ptr+13>>>0>>>0]=t},this.get_rethrown=function(){return X[this.ptr+13>>>0>>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)},this.set_adjusted_ptr=function(t){k[this.ptr+16>>>2>>>0]=t},this.get_adjusted_ptr=function(){return k[this.ptr+16>>>2>>>0]},this.get_exception_ptr=function(){var t=It(this.get_type());if(t)return k[this.excPtr>>>2>>>0];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}function ur(e,t,r){e>>>=0,t>>>=0,r>>>=0;var n=new lr(e);throw n.init(t,r),$e=e,ut++,$e}function cr(e,t,r,n,s){e>>>=0,t>>>=0,r>>>=0}var fr=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ct=e},ct=void 0,W=e=>{for(var t="",r=e;x[r>>>0];)t+=ct[x[r++>>>0]];return t},ue={},ie={},we={},ce=void 0,A=e=>{throw new ce(e)},ft=void 0,Se=e=>{throw new ft(e)},fe=(e,t,r)=>{e.forEach(function(f){we[f]=t});function n(f){var _=r(f);_.length!==e.length&&Se("Mismatched type converter count");for(var g=0;g<e.length;++g)H(e[g],_[g])}var s=new Array(t.length),l=[],d=0;t.forEach((f,_)=>{ie.hasOwnProperty(f)?s[_]=ie[f]:(l.push(f),ue.hasOwnProperty(f)||(ue[f]=[]),ue[f].push(()=>{s[_]=ie[f],++d,d===l.length&&n(s)}))}),l.length===0&&n(s)};function pr(e,t,r={}){var n=t.name;if(e||A(`type "${n}" must have a positive integer typeid pointer`),ie.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;A(`Cannot register type '${n}' twice`)}if(ie[e]=t,delete we[e],ue.hasOwnProperty(e)){var s=ue[e];delete ue[e],s.forEach(l=>l())}}function H(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return pr(e,t,r)}var J=8;function dr(e,t,r,n){e>>>=0,t>>>=0,t=W(t),H(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,l){return l?r:n},argPackAdvance:J,readValueFromPointer:function(s){return this.fromWireType(x[s>>>0])},destructorFunction:null})}function gr(e){if(!(this instanceof Q)||!(e instanceof Q))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)s=n.upcast(s),n=n.baseClass;return t===n&&r===s}var mr=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ve=e=>{function t(r){return r.$$.ptrType.registeredClass.name}A(t(e)+" instance already deleted")},Oe=!1,pt=e=>{},hr=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},dt=e=>{e.count.value-=1;var t=e.count.value===0;t&&hr(e)},gt=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var n=gt(e,t,r.baseClass);return n===null?null:r.downcast(n)},mt={},yr=()=>Object.keys(be).length,vr=()=>{var e=[];for(var t in be)be.hasOwnProperty(t)&&e.push(be[t]);return e},ye=[],je=()=>{for(;ye.length;){var e=ye.pop();e.$$.deleteScheduled=!1,e.delete()}},ve=void 0,br=e=>{ve=e,ye.length&&ve&&ve(je)},Pr=()=>{o.getInheritedInstanceCount=yr,o.getLiveInheritedInstances=vr,o.flushPendingDeletes=je,o.setDelayFunction=br},be={},_r=(e,t)=>{for(t===void 0&&A("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Cr=(e,t)=>(t=_r(e,t),be[t]),Ae=(e,t)=>{(!t.ptrType||!t.ptr)&&Se("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&Se("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Pe(Object.create(e,{$$:{value:t}}))};function Tr(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Cr(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function s(){return this.isSmartPointer?Ae(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ae(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),d=mt[l];if(!d)return s.call(this);var f;this.isConst?f=d.constPointerType:f=d.pointerType;var _=gt(t,this.registeredClass,f.registeredClass);return _===null?s.call(this):this.isSmartPointer?Ae(f.registeredClass.instancePrototype,{ptrType:f,ptr:_,smartPtrType:this,smartPtr:e}):Ae(f.registeredClass.instancePrototype,{ptrType:f,ptr:_})}var Pe=e=>typeof FinalizationRegistry>"u"?(Pe=t=>t,e):(Oe=new FinalizationRegistry(t=>{dt(t.$$)}),Pe=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var s={$$:r};Oe.register(t,s,t)}return t},pt=t=>Oe.unregister(t),Pe(e));function $r(){if(this.$$.ptr||Ve(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Pe(Object.create(Object.getPrototypeOf(this),{$$:{value:mr(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function wr(){this.$$.ptr||Ve(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),pt(this),dt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Sr(){return!this.$$.ptr}function Ar(){return this.$$.ptr||Ve(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),ye.push(this),ye.length===1&&ve&&ve(je),this.$$.deleteScheduled=!0,this}var Fr=()=>{Q.prototype.isAliasOf=gr,Q.prototype.clone=$r,Q.prototype.delete=wr,Q.prototype.isDeleted=Sr,Q.prototype.deleteLater=Ar};function Q(){}var Ir=48,Mr=57,Ge=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ir&&t<=Mr?`_${e}`:e};function Fe(e,t){return e=Ge(e),{[e]:function(){return t.apply(this,arguments)}}[e]}var ht=(e,t,r)=>{if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||A(`Function '${r}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},Le=(e,t,r)=>{o.hasOwnProperty(e)?((r===void 0||o[e].overloadTable!==void 0&&o[e].overloadTable[r]!==void 0)&&A(`Cannot register public name '${e}' twice`),ht(o,e,e),o.hasOwnProperty(r)&&A(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),o[e].overloadTable[r]=t):(o[e]=t,r!==void 0&&(o[e].numArguments=r))};function Dr(e,t,r,n,s,l,d,f){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=s,this.getActualType=l,this.upcast=d,this.downcast=f,this.pureVirtualFunctions=[]}var ze=(e,t,r)=>{for(;t!==r;)t.upcast||A(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Rr(e,t){if(t===null)return this.isReference&&A(`null is not a valid ${this.name}`),0;t.$$||A(`Cannot pass "${Je(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=ze(t.$$.ptr,r,this.registeredClass);return n}function kr(e,t){var r;if(t===null)return this.isReference&&A(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;t.$$||A(`Cannot pass "${Je(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&A(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=ze(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&A("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:A(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var s=t.clone();r=this.rawShare(r,De.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:A("Unsupporting sharing policy")}return r}function Er(e,t){if(t===null)return this.isReference&&A(`null is not a valid ${this.name}`),0;t.$$||A(`Cannot pass "${Je(t)}" as a ${this.name}`),t.$$.ptr||A(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&A(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,n=ze(t.$$.ptr,r,this.registeredClass);return n}function yt(e){return this.fromWireType(k[e>>>2>>>0])}function xr(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Wr(e){this.rawDestructor&&this.rawDestructor(e)}var Ur=e=>{e!==null&&e.delete()},Vr=()=>{N.prototype.getPointee=xr,N.prototype.destructor=Wr,N.prototype.argPackAdvance=J,N.prototype.readValueFromPointer=yt,N.prototype.deleteObject=Ur,N.prototype.fromWireType=Tr};function N(e,t,r,n,s,l,d,f,_,g,w){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=s,this.pointeeType=l,this.sharingPolicy=d,this.rawGetPointee=f,this.rawConstructor=_,this.rawShare=g,this.rawDestructor=w,!s&&t.baseClass===void 0?n?(this.toWireType=Rr,this.destructorFunction=null):(this.toWireType=Er,this.destructorFunction=null):this.toWireType=kr}var vt=(e,t,r)=>{o.hasOwnProperty(e)||Se("Replacing nonexistant public symbol"),o[e].overloadTable!==void 0&&r!==void 0?o[e].overloadTable[r]=t:(o[e]=t,o[e].argCount=r)},Or=(e,t,r)=>{var n=o["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)},Ie=[],bt=e=>{var t=Ie[e];return t||(e>=Ie.length&&(Ie.length=e+1),Ie[e]=t=tt.get(e)),t},jr=(e,t,r)=>{if(e.includes("j"))return Or(e,t,r);var n=bt(t).apply(null,r);return n},Gr=(e,t)=>{var r=[];return function(){return r.length=0,Object.assign(r,arguments),jr(e,t,r)}},se=(e,t)=>{e=W(e);function r(){return e.includes("j")?Gr(e,t):bt(t)}var n=r();return typeof n!="function"&&A(`unknown function pointer with signature ${e}: ${t}`),n},Lr=(e,t)=>{var r=Fe(t,function(n){this.name=t,this.message=n;var s=new Error(n).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},Pt=void 0,_t=e=>{var t=Ft(e),r=W(t);return q(t),r},Me=(e,t)=>{var r=[],n={};function s(l){if(!n[l]&&!ie[l]){if(we[l]){we[l].forEach(s);return}r.push(l),n[l]=!0}}throw t.forEach(s),new Pt(`${e}: `+r.map(_t).join([", "]))};function zr(e,t,r,n,s,l,d,f,_,g,w,F,D){e>>>=0,t>>>=0,r>>>=0,n>>>=0,s>>>=0,l>>>=0,d>>>=0,f>>>=0,_>>>=0,g>>>=0,w>>>=0,F>>>=0,D>>>=0,w=W(w),l=se(s,l),f&&(f=se(d,f)),g&&(g=se(_,g)),D=se(F,D);var I=Ge(w);Le(I,function(){Me(`Cannot construct ${w} due to unbound types`,[n])}),fe([e,t,r],n?[n]:[],function(U){U=U[0];var j,V;n?(j=U.registeredClass,V=j.instancePrototype):V=Q.prototype;var Y=Fe(I,function(){if(Object.getPrototypeOf(this)!==qe)throw new ce("Use 'new' to construct "+w);if(z.constructor_body===void 0)throw new ce(w+" has no accessible constructor");var kt=z.constructor_body[arguments.length];if(kt===void 0)throw new ce(`Tried to invoke ctor of ${w} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(z.constructor_body).toString()}) parameters instead!`);return kt.apply(this,arguments)}),qe=Object.create(V,{constructor:{value:Y}});Y.prototype=qe;var z=new Dr(w,Y,qe,D,j,l,f,g);z.baseClass&&(z.baseClass.__derivedClasses===void 0&&(z.baseClass.__derivedClasses=[]),z.baseClass.__derivedClasses.push(z));var En=new N(w,z,!0,!1,!1),Dt=new N(w+"*",z,!1,!1,!1),Rt=new N(w+" const*",z,!1,!0,!1);return mt[e]={pointerType:Dt,constPointerType:Rt},vt(I,Y),[En,Dt,Rt]})}var Be=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(k[t+n*4>>>2>>>0]);return r},Br=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Hr(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=Fe(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,s=e.apply(n,t);return s instanceof Object?s:n}function He(e,t,r,n,s,l){var d=t.length;d<2&&A("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var f=t[1]!==null&&r!==null,_=!1,g=1;g<t.length;++g)if(t[g]!==null&&t[g].destructorFunction===void 0){_=!0;break}for(var w=t[0].name!=="void",F="",D="",g=0;g<d-2;++g)F+=(g!==0?", ":"")+"arg"+g,D+=(g!==0?", ":"")+"arg"+g+"Wired";var I=`
        return function ${Ge(e)}(${F}) {
        if (arguments.length !== ${d-2}) {
          throwBindingError('function ${e} called with ' + arguments.length + ' arguments, expected ${d-2}');
        }`;_&&(I+=`var destructors = [];
`);var U=_?"destructors":"null",j=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],V=[A,n,s,Br,t[0],t[1]];f&&(I+="var thisWired = classParam.toWireType("+U+`, this);
`);for(var g=0;g<d-2;++g)I+="var arg"+g+"Wired = argType"+g+".toWireType("+U+", arg"+g+"); // "+t[g+2].name+`
`,j.push("argType"+g),V.push(t[g+2]);if(f&&(D="thisWired"+(D.length>0?", ":"")+D),I+=(w||l?"var rv = ":"")+"invoker(fn"+(D.length>0?", ":"")+D+`);
`,_)I+=`runDestructors(destructors);
`;else for(var g=f?1:2;g<t.length;++g){var Y=g===1?"thisWired":"arg"+(g-2)+"Wired";t[g].destructorFunction!==null&&(I+=Y+"_dtor("+Y+"); // "+t[g].name+`
`,j.push(Y+"_dtor"),V.push(t[g].destructorFunction))}return w&&(I+=`var ret = retType.fromWireType(rv);
return ret;
`),I+=`}
`,j.push(I),Hr(Function,j).apply(null,V)}function Jr(e,t,r,n,s,l){e>>>=0,r>>>=0,n>>>=0,s>>>=0,l>>>=0;var d=Be(t,r);s=se(n,s),fe([],[e],function(f){f=f[0];var _=`constructor ${f.name}`;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new ce(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return f.registeredClass.constructor_body[t-1]=()=>{Me(`Cannot construct ${f.name} due to unbound types`,d)},fe([],d,g=>(g.splice(1,0,null),f.registeredClass.constructor_body[t-1]=He(_,g,null,s,l),[])),[]})}function Nr(e,t,r,n,s,l,d,f,_){e>>>=0,t>>>=0,n>>>=0,s>>>=0,l>>>=0,d>>>=0;var g=Be(r,n);t=W(t),l=se(s,l),fe([],[e],function(w){w=w[0];var F=`${w.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&w.registeredClass.pureVirtualFunctions.push(t);function D(){Me(`Cannot call ${F} due to unbound types`,g)}var I=w.registeredClass.instancePrototype,U=I[t];return U===void 0||U.overloadTable===void 0&&U.className!==w.name&&U.argCount===r-2?(D.argCount=r-2,D.className=w.name,I[t]=D):(ht(I,t,F),I[t].overloadTable[r-2]=D),fe([],g,function(j){var V=He(F,j,w,l,d,_);return I[t].overloadTable===void 0?(V.argCount=r-2,I[t]=V):I[t].overloadTable[r-2]=V,[]}),[]})}function qr(){Object.assign(Ct.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function Ct(){this.allocated=[void 0],this.freelist=[]}var O=new Ct;function Tt(e){e>>>=0,e>=O.reserved&&--O.get(e).refcount===0&&O.free(e)}var Kr=()=>{for(var e=0,t=O.reserved;t<O.allocated.length;++t)O.allocated[t]!==void 0&&++e;return e},Xr=()=>{O.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),O.reserved=O.allocated.length,o.count_emval_handles=Kr},De={toValue:e=>(e||A("Cannot use deleted val. handle = "+e),O.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return O.allocate({refcount:1,value:e})}}};function $t(e){return this.fromWireType(ne[e>>>2>>>0])}var Qr=function(e,t){e>>>=0,t>>>=0,t=W(t),H(e,{name:t,fromWireType:r=>{var n=De.toValue(r);return Tt(r),n},toWireType:(r,n)=>De.toHandle(n),argPackAdvance:J,readValueFromPointer:$t,destructorFunction:null})},Yr=(e,t,r)=>{switch(t){case 1:return r?function(n){return this.fromWireType(X[n>>>0>>>0])}:function(n){return this.fromWireType(x[n>>>0>>>0])};case 2:return r?function(n){return this.fromWireType(ae[n>>>1>>>0])}:function(n){return this.fromWireType(me[n>>>1>>>0])};case 4:return r?function(n){return this.fromWireType(ne[n>>>2>>>0])}:function(n){return this.fromWireType(k[n>>>2>>>0])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function Zr(e,t,r,n){e>>>=0,t>>>=0,r>>>=0,t=W(t);function s(){}s.values={},H(e,{name:t,constructor:s,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,d)=>d.value,argPackAdvance:J,readValueFromPointer:Yr(t,r,n),destructorFunction:null}),Le(t,s)}var wt=(e,t)=>{var r=ie[e];return r===void 0&&A(t+" has unknown type "+_t(e)),r};function en(e,t,r){e>>>=0,t>>>=0,r>>>=0;var n=wt(e,"enum");t=W(t);var s=n.constructor,l=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Fe(`${n.name}_${t}`,function(){})}});s.values[r]=l,s[t]=l}var Je=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},tn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(Ye[r>>>2>>>0])};case 8:return function(r){return this.fromWireType(Ze[r>>>3>>>0])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},rn=function(e,t,r){e>>>=0,t>>>=0,r>>>=0,t=W(t),H(e,{name:t,fromWireType:n=>n,toWireType:(n,s)=>s,argPackAdvance:J,readValueFromPointer:tn(t,r),destructorFunction:null})};function nn(e,t,r,n,s,l,d){e>>>=0,r>>>=0,n>>>=0,s>>>=0,l>>>=0;var f=Be(t,r);e=W(e),s=se(n,s),Le(e,function(){Me(`Cannot call ${e} due to unbound types`,f)},t-1),fe([],f,function(_){var g=[_[0],null].concat(_.slice(1));return vt(e,He(e,g,null,s,l,d),t-1),[]})}var on=(e,t,r)=>{switch(t){case 1:return r?n=>X[n>>>0>>>0]:n=>x[n>>>0>>>0];case 2:return r?n=>ae[n>>>1>>>0]:n=>me[n>>>1>>>0];case 4:return r?n=>ne[n>>>2>>>0]:n=>k[n>>>2>>>0];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}};function sn(e,t,r,n,s){e>>>=0,t>>>=0,r>>>=0,t=W(t),s===-1&&(s=4294967295);var l=w=>w;if(n===0){var d=32-8*r;l=w=>w<<d>>>d}var f=t.includes("unsigned"),_=(w,F)=>{},g;f?g=function(w,F){return _(F,this.name),F>>>0}:g=function(w,F){return _(F,this.name),F},H(e,{name:t,fromWireType:l,toWireType:g,argPackAdvance:J,readValueFromPointer:on(t,r,n!==0),destructorFunction:null})}function an(e,t,r){e>>>=0,r>>>=0;var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=n[t];function l(d){var f=k[d>>>2>>>0],_=k[d+4>>>2>>>0];return new s(X.buffer,_,f)}r=W(r),H(e,{name:r,fromWireType:l,argPackAdvance:J,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})}var ln=(e,t,r,n)=>{if(r>>>=0,!(n>0))return 0;for(var s=r,l=r+n-1,d=0;d<e.length;++d){var f=e.charCodeAt(d);if(f>=55296&&f<=57343){var _=e.charCodeAt(++d);f=65536+((f&1023)<<10)|_&1023}if(f<=127){if(r>=l)break;t[r++>>>0]=f}else if(f<=2047){if(r+1>=l)break;t[r++>>>0]=192|f>>6,t[r++>>>0]=128|f&63}else if(f<=65535){if(r+2>=l)break;t[r++>>>0]=224|f>>12,t[r++>>>0]=128|f>>6&63,t[r++>>>0]=128|f&63}else{if(r+3>=l)break;t[r++>>>0]=240|f>>18,t[r++>>>0]=128|f>>12&63,t[r++>>>0]=128|f>>6&63,t[r++>>>0]=128|f&63}}return t[r>>>0]=0,r-s},un=(e,t,r)=>ln(e,x,t,r),cn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},St=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,fn=(e,t,r)=>{t>>>=0;for(var n=t+r,s=t;e[s]&&!(s>=n);)++s;if(s-t>16&&e.buffer&&St)return St.decode(e.subarray(t,s));for(var l="";t<s;){var d=e[t++];if(!(d&128)){l+=String.fromCharCode(d);continue}var f=e[t++]&63;if((d&224)==192){l+=String.fromCharCode((d&31)<<6|f);continue}var _=e[t++]&63;if((d&240)==224?d=(d&15)<<12|f<<6|_:d=(d&7)<<18|f<<12|_<<6|e[t++]&63,d<65536)l+=String.fromCharCode(d);else{var g=d-65536;l+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return l},pn=(e,t)=>(e>>>=0,e?fn(x,e,t):""),dn=function(e,t){e>>>=0,t>>>=0,t=W(t);var r=t==="std::string";H(e,{name:t,fromWireType:n=>{var s=k[n>>>2>>>0],l=n+4,d;if(r)for(var f=l,_=0;_<=s;++_){var g=l+_;if(_==s||x[g>>>0]==0){var w=g-f,F=pn(f,w);d===void 0?d=F:(d+=String.fromCharCode(0),d+=F),f=g+1}}else{for(var D=new Array(s),_=0;_<s;++_)D[_]=String.fromCharCode(x[l+_>>>0]);d=D.join("")}return q(n),d},toWireType:(n,s)=>{s instanceof ArrayBuffer&&(s=new Uint8Array(s));var l,d=typeof s=="string";d||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||A("Cannot pass non-string to std::string"),r&&d?l=cn(s):l=s.length;var f=Ne(4+l+1),_=f+4;if(k[f>>>2>>>0]=l,r&&d)un(s,_,l+1);else if(d)for(var g=0;g<l;++g){var w=s.charCodeAt(g);w>255&&(q(_),A("String has UTF-16 code units that do not fit in 8 bits")),x[_+g>>>0]=w}else for(var g=0;g<l;++g)x[_+g>>>0]=s[g];return n!==null&&n.push(q,f),f},argPackAdvance:J,readValueFromPointer:yt,destructorFunction:n=>q(n)})},At=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,gn=(e,t)=>{for(var r=e,n=r>>1,s=n+t/2;!(n>=s)&&me[n>>>0];)++n;if(r=n<<1,r-e>32&&At)return At.decode(x.subarray(e>>>0,r>>>0));for(var l="",d=0;!(d>=t/2);++d){var f=ae[e+d*2>>>1>>>0];if(f==0)break;l+=String.fromCharCode(f)}return l},mn=(e,t,r)=>{if(r===void 0&&(r=2147483647),r<2)return 0;r-=2;for(var n=t,s=r<e.length*2?r/2:e.length,l=0;l<s;++l){var d=e.charCodeAt(l);ae[t>>>1>>>0]=d,t+=2}return ae[t>>>1>>>0]=0,t-n},hn=e=>e.length*2,yn=(e,t)=>{for(var r=0,n="";!(r>=t/4);){var s=ne[e+r*4>>>2>>>0];if(s==0)break;if(++r,s>=65536){var l=s-65536;n+=String.fromCharCode(55296|l>>10,56320|l&1023)}else n+=String.fromCharCode(s)}return n},vn=(e,t,r)=>{if(t>>>=0,r===void 0&&(r=2147483647),r<4)return 0;for(var n=t,s=n+r-4,l=0;l<e.length;++l){var d=e.charCodeAt(l);if(d>=55296&&d<=57343){var f=e.charCodeAt(++l);d=65536+((d&1023)<<10)|f&1023}if(ne[t>>>2>>>0]=d,t+=4,t+4>s)break}return ne[t>>>2>>>0]=0,t-n},bn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},Pn=function(e,t,r){e>>>=0,t>>>=0,r>>>=0,r=W(r);var n,s,l,d,f;t===2?(n=gn,s=mn,d=hn,l=()=>me,f=1):t===4&&(n=yn,s=vn,d=bn,l=()=>k,f=2),H(e,{name:r,fromWireType:_=>{for(var g=k[_>>>2>>>0],w=l(),F,D=_+4,I=0;I<=g;++I){var U=_+4+I*t;if(I==g||w[U>>>f]==0){var j=U-D,V=n(D,j);F===void 0?F=V:(F+=String.fromCharCode(0),F+=V),D=U+t}}return q(_),F},toWireType:(_,g)=>{typeof g!="string"&&A(`Cannot pass non-string to C++ string type ${r}`);var w=d(g),F=Ne(4+w+t);return k[F>>>2]=w>>f,s(g,F+4,w+t),_!==null&&_.push(q,F),F},argPackAdvance:J,readValueFromPointer:$t,destructorFunction:_=>q(_)})},_n=function(e,t){e>>>=0,t>>>=0,t=W(t),H(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})};function Cn(e){e>>>=0,e>4&&(O.get(e).refcount+=1)}function Tn(e,t){e>>>=0,t>>>=0,e=wt(e,"_emval_take_value");var r=e.readValueFromPointer(t);return De.toHandle(r)}var $n=()=>{Ce("")};function wn(e,t,r){return e>>>=0,t>>>=0,r>>>=0,x.copyWithin(e>>>0,t>>>0,t+r>>>0)}var Sn=()=>3221225472,An=e=>{var t=_e.buffer,r=(e-t.byteLength+65535)/65536;try{return _e.grow(r),et(),1}catch{}};function Fn(e){e>>>=0;var t=x.length,r=Sn();if(e>r)return!1;for(var n=(_,g)=>_+(g-_%g)%g,s=1;s<=4;s*=2){var l=t*(1+.2/s);l=Math.min(l,e+100663296);var d=Math.min(r,n(Math.max(e,l),65536)),f=An(d);if(f)return!0}return!1}fr(),ce=o.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},ft=o.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Fr(),Pr(),Vr(),Pt=o.UnboundTypeError=Lr(Error,"UnboundTypeError"),qr(),Xr();var In={w:ar,b:ur,o:cr,t:dr,d:zr,e:Jr,a:Nr,s:Qr,q:Zr,i:en,m:rn,f:nn,g:sn,c:an,l:dn,j:Pn,u:_n,v:Tt,n:Cn,h:Tn,k:$n,r:wn,p:Fn},L=sr(),Mn=()=>(Mn=L.y)(),Ft=e=>(Ft=L.A)(e),Dn=o.__embind_initialize_bindings=()=>(Dn=o.__embind_initialize_bindings=L.B)(),Rn=()=>(Rn=L.__errno_location)(),Ne=e=>(Ne=L.C)(e),q=e=>(q=L.D)(e),It=e=>(It=L.E)(e);function kn(e){e=Object.assign({},e);var t=n=>s=>n(s)>>>0,r=n=>()=>n()>>>0;return e.A=t(e.A),e.__errno_location=r(e.__errno_location),e.C=t(e.C),e.stackSave=r(e.stackSave),e.stackAlloc=t(e.stackAlloc),e}var Re;he=function e(){Re||Mt(),Re||(he=e)};function Mt(){if(oe>0||(Kt(),oe>0))return;function e(){Re||(Re=!0,o.calledRun=!0,!Qe&&(Xt(),c(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),Qt()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return Mt(),i.ready}})();typeof Ut=="object"&&typeof Ke=="object"?Ke.exports=Wt:typeof define=="function"&&define.amd&&define([],()=>Wt)});var Ot=Ln(Vt(),1),jt=Ot.default,ke=null;async function R(){return ke===null&&(ke=jt()),ke}function zn(){ke=null,Ee=null,jt().then(a=>{Ee=a})}var Ee=null;function Bn(a){Ee=a}function Z(){return Ee}function B(a,i,o,c){let u=0,h=new i.VectorDouble,p=new i.VectorDouble,y=new i.VectorUInt,P=new i.VectorUInt,b=new i.VectorUInt;function v(m,S){y.push_back(u),P.push_back(0);for(let $=0,T=m.length;$<T;++$){let M=m[$];$>0&&(y.push_back(u),P.push_back(1)),M.length>0&&(S+=1);for(let E=0,G=M.length;E<G;++E){let K=M[E];h.push_back(K[0]),p.push_back(K[1]),u+=1}}return S}for(let m=0,S=a.length;m<S;++m){let $=a[m],T=0;if($.geometry.type==="MultiPolygon")for(let M=0,E=$.geometry.coordinates.length;M<E;++M){let G=$.geometry.coordinates[M];T=v(G,T)}else $.geometry.type==="Polygon"&&(T=v($.geometry.coordinates,T));b.push_back(T)}return new i.PolygonCollection(h,p,y,P,b,o??!1,c??!1)}function pe(a,i,o){let c=0,u=new i.VectorDouble,h=new i.VectorDouble,p=new i.VectorUInt,y=new i.VectorUInt;function P(v){p.push_back(c);let C=!1;for(let m=0,S=v.length;m<S;++m){let $=v[m];u.push_back($[0]),h.push_back($[1]),c+=1,C=!0}return C}for(let v=0,C=a.length;v<C;++v){let m=a[v],S=0;if(m.geometry.type==="MultiLineString")for(let $=0,T=m.geometry.coordinates.length;$<T;++$)P(m.geometry.coordinates[$])&&(S+=1);else m.geometry.type==="LineString"&&P(m.geometry.coordinates)&&(S+=1);y.push_back(S)}return new i.LineCollection(u,h,p,y,o??!1)}function ee(a,i,o){let c=0,u=new i.VectorDouble,h=new i.VectorDouble,p=new i.VectorUInt,y=new i.VectorUInt;function P(v){let C=!1;return v.length>=2&&(u.push_back(v[0]),h.push_back(v[1]),C=!0),c+=1,C}for(let v=0,C=a.length;v<C;++v){let m=a[v],S=0;if(m.geometry.type==="MultiPoint"){p.push_back(c);for(let $=0,T=m.geometry.coordinates.length;$<T;++$)P(m.geometry.coordinates[$])&&(S+=1)}else m.geometry.type==="Point"&&(p.push_back(c),P(m.geometry.coordinates)&&(S+=1));y.push_back(S)}return new i.PointCollection(u,h,p,y,o??!1)}function Xe(a,i,o,c,u){let h=0,p=new o.VectorDouble,y=new o.VectorDouble,P=new o.VectorUInt,b=new o.VectorUInt;for(let m=c??0,S=u??a.length;m<S;++m)b.push_back(1),P.push_back(h),p.push_back(i[m]),y.push_back(a[m]),h+=1;let v=!1;return new o.PointCollection(p,y,P,b,v)}function te(a,i,o,c){if(a.features&&a.features.length>0){let u=a.features[0].geometry.type;if(u==="Polygon"||u==="MultiPolygon")return B(a.features,i);if(u==="LineString"||u==="MultiLineString")return pe(a.features,i);if(u==="Point"||u==="MultiPoint")return ee(a.features,i)}else if(a.latitudes&&a.longitudes)return Xe(a.latitudes,a.longitudes,i,o,c);return null}function xe(a){let i=a.getX(),o=a.getY(),c=a.getParts(),u=a.getHoles(),h=i.size(),p=c.size(),y=0;for(let b=0;b<p;++b)u.get(b)===0&&(y+=1);if(y>1){let b=Array(y),v=-1;for(let C=0;C<p;++C){u.get(C)===0&&(v+=1,b[v]=[]);let m=[],S=c.get(C),$=C===p-1?h:c.get(C+1);for(let T=S;T<$;++T)m.push([i.get(T),o.get(T)]);b[v].push(m)}return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:b},properties:{}}}else{let b=Array(p);for(let v=0;v<p;++v){let C=[],m=c.get(v),S=v===p-1?h:c.get(v+1);for(let $=m;$<S;++$)C.push([i.get($),o.get($)]);b[v]=C}return{type:"Feature",geometry:{type:"Polygon",coordinates:b},properties:{}}}}async function mo(a){let i=await R(),o=B(a,i),c=i.getCentroids(o),u=c.size(),h=[];for(let p=0;p<u;++p)c.get(p).size()===0?h.push(null):h.push({type:"Feature",geometry:{type:"Point",coordinates:[c.get(p).get(0),c.get(p).get(1)]},properties:{}});return o.delete(),h}function ho(a){let i=Z();if(!i||!a)return null;let o=a?.geometry?.type,c;if(o==="Polygon"||o==="MultiPolygon")c=B([a],i);else if(o==="LineString"||o==="MultiLineString")c=pe([a],i);else if(o==="Point"||o==="MultiPoint")c=ee([a],i);else return null;let u=i.getCentroids(c);return c.delete(),u.size()>0&&u.get(0).size()===2?[u.get(0).get(0),u.get(0).get(1)]:null}function yo(a){let i=[],o=Z();if(!o)return i;let c=a.length,u=[],h=[];i=Array(c).fill(null);let p=null;for(let b=0;b<c;++b){let v=a[b],C=v?.geometry?.type;C&&(p||(p=C),(p.indexOf(C)>=0||C.indexOf(p)>=0)&&(u.push(b),h.push(v)))}let y=p==="Polygon"||p==="MultiPolygon"?B(h,o):p==="LineString"||p==="MultiLineString"?pe(h,o):p==="Point"||p==="MultiPoint"?ee(h,o):null;if(!y)return i;let P=o.getCentroids(y);y.delete();for(let b=0,v=P.size();b<v;++b)P.get(b).size()===0?i[u[b]]=null:i[u[b]]=[P.get(b)?.get(0),P.get(b)?.get(1)];return i}var Hn=(o=>(o.Mile="Mile",o.KM="KM",o))(Hn||{});async function _o({distanceUnit:a,geometries:i,latLngArrays:o}){let c=i?.length??o?.latitudes.length??0,u=0,h=0,p=0;if(c===0)return{minDistanceThreshold:u,suggestedDistanceThreshold:h,maxDistanceThreshold:p};let y=await R(),P=te({features:i??null,latitudes:o?.latitudes??null,longitudes:o?.longitudes??null},y);if(P){let b=y.getDistanceThresholds(P,a==="Mile");u=b.get(0),h=b.get(1),p=b.get(2)}return{minDistanceThreshold:u,suggestedDistanceThreshold:h,maxDistanceThreshold:p}}async function Co({distanceThreshold:a,distanceUnit:i,geometries:o,latLngArrays:c}){let u=o?.length??c?.latitudes.length??0,h=Array(u);if(u===0)return h;let p=await R(),y=te({features:o??null,latitudes:c?.latitudes??null,longitudes:c?.longitudes??null},p);if(y){let P=p.getDistanceWeights(y,a,i==="Mile");for(let b=0;b<u;++b){let v=P.get(b),C=Array(v.size());for(let m=0,S=v.size();m<S;++m)C[m]=v.get(m);h[b]=C}}return h}var Jn=1609.344;function Gt(a,i){return i==="Mile"?a*Jn:a*1e3}function Nn(a,i,o,c,u){let h=a.length,p=Array(h).fill(null),y=u??Z();if(!y)return p;let P=[],b=[],v=null;for(let T=0;T<h;++T){let M=a[T],E=M?.geometry?.type;E&&(v||(v=E),(v.indexOf(E)>=0||E.indexOf(v)>=0)&&(P.push(T),b.push(M)))}let C=!0,S=v==="Polygon"||v==="MultiPolygon"?B(b,y,!0,C):v==="LineString"||v==="MultiLineString"?pe(b,y,C):v==="Point"||v==="MultiPoint"?ee(b,y,C):null;if(!S)return p;let $=Gt(i,o);for(let T=0,M=b.length;T<M;++T){let E=P[T],G=S.buffer(T,$,c),K=xe(G);p[E]=K}return S.delete(),p}function Fo(a,i,o,c,u){return Nn([a],i,o,c,u)[0]}var Lt=(p=>(p.INTERSECTS="INTERSECTS",p.WITHIN="WITHIN",p.TOUCHES="TOUCHES",p.OVERLAPS="OVERLAPS",p.CROSSES="CROSSES",p.EQUALS="EQUALS",p))(Lt||{});async function qn(a,i,o){let c=await R();return Kn(a,i,o,c)}function Kn(a,i,o,c,u,h){let p=te(a,c,u,h),y=te(i,c,u,h),P=c.SpatialJoinType[o];if(p&&y&&P){let b=c.spatialJoin(p,y,P),v=[];for(let C=0,m=b.size();C<m;++C){let S=b.get(C),$=[];for(let T=0,M=S.size();T<M;++T)$.push(S.get(T));v.push($)}return v}return null}function Bt(a,i,o,c){let u=[],h=a.features?.length??a.latitudes?.length,p=i.features?.length??i.latitudes?.length;if(!h||!p)return null;let y=h<p,P=y?p:h,b=Math.floor(P/c),v=P%c,C=new Array(c),m=S=>{let $=S*b,T=(S+1)*b;return S===c-1&&(T+=v),C[S]=$,{id:S,source:zt(a,y,$,T),join:zt(i,!y,$,T),spatialJoinOperation:o,start:$,end:T}};for(let S=0;S<c;++S){let $=m(S);u.push($)}return{taskDataArray:u,indexTable:C,sourceSize:h,joinSize:p,divideRight:y}}function zt(a,i,o,c){return{...a.latitudes?{latitudes:a.latitudes}:{},...a.longitudes?{longitudes:a.longitudes}:{},features:a.features?.length&&a.features.length>0?i?a.features:a.features?.slice(o,c):null}}function Ht(a,i,o,c,u){for(let h=0,p=a.length;h<p;++h){let y=a[h];for(let P=0,b=y.length;P<b;++P)i?u[h].push(o[c]+y[P]):u[o[c]+h].push(y[P])}}var Xn=6;async function Qn(a,i,o,c){let u=c?.workerCount??Xn,h=Bt(a,i,o,u);if(!h)return null;let{sourceSize:p,divideRight:y,indexTable:P,taskDataArray:b}=h,v=[];for(let T=0;T<p;++T)v.push([]);let C=0,m,S=T=>{C--;let{result:M,id:E}=T.data;Ht(M,y,P,E,v),C===0&&m(v)},$=T=>{for(let M=0;M<u;++M){let E=b[M],G=new Worker(new URL(c.workerUrl));G.onmessage=S,G.postMessage(E),C++}m=T};return new Promise($)}async function Yn(a){let i=await R();return Jt(a,i)}function Jt(a,i){let o=i??Z();if(!o)return{type:"Feature",geometry:{type:"Polygon",coordinates:[]},properties:{}};let u=B(a,o,!0),h=o.spatialUnion(u);return xe(h)}async function Zn(a,i){let o=a.length,c=Array(o);if(o===0)return c;let u=await R(),h=B(a,u),p;if(i.features)p=ee(i.features,u);else if(i.latitudes&&i.longitudes)p=Xe(i.latitudes,i.longitudes,u);else return c;let y=u.spatialCount(h,p);for(let P=0;P<o;++P)c[P]=y.get(P);return c}function eo(a,i){let o=new i.VectorDouble,c=new i.VectorDouble,u=new i.VectorUInt,h=new i.VectorUInt,p=!1;for(let P=0;P<a.length;P++){let b=a[P];if(b){let v=b.positions.value;for(let m=0;m<v.length;m+=2)o.push_back(v[m]),c.push_back(v[m+1]);let C=0;for(let m=0;m<b.featureIds.value.length;m++)(m===0||b.featureIds.value[m]!==b.featureIds.value[m-1])&&u.push_back(C),C++;for(let m=1;m<u.size();m++)h.push_back(u.get(m)-u.get(m-1));u.size()>0&&h.push_back(C-u.get(u.size()-1))}}return new i.PointCollection(o,c,u,h,p)}async function to({k:a,geometries:i,latLngArrays:o}){let c=i?i.length:o?o.latitudes.length:0,u=Array(c);if(c===0)return u;let h=await R(),p=te({features:i??null,latitudes:o?.latitudes??null,longitudes:o?.longitudes??null},h);if(p){let y=h.getNearestNeighbors(p,a);for(let P=0;P<c;++P){let b=y.get(P),v=Array(b.size());for(let C=0,m=b.size();C<m;++C)v[C]=b.get(C);u[P]=v}}return u}async function ro(a,i,o){let c=await R(),u=a.length,h=new c.VectorDouble;h.resize(u,0);for(let P=0;P<u;++P)h.set(P,a[P]);let p=new c.VecVecUInt;for(let P=0;P<u;++P){let b=i[P],v=new c.VectorUInt;for(let C=0,m=b.length;C<m;++C)v.push_back(b[C]);p.push_back(v)}let y=c.localMoran(h,p,o);return{isValid:y.isValid(),clusters:re(y.getClusters()),lagValues:re(y.getLagValues()),lisaValues:re(y.getLisaValues()),pValues:re(y.getPValues())}}function re(a){let i=[],o=a.size();for(let c=0;c<o;++c)i.push(a.get(c));return i}async function no(a,i){let o=await R(),c=i.length,u=new o.VectorInt;u.resize(c,0);let h=new o.VectorDouble;h.resize(c,0);for(let y=0;y<c;++y)h.set(y,i[y]),(i[y]===void 0||i[y]===null)&&u.set(y,1);let p=o.quantileBreaks(a,h,u);return re(p)}async function oo(a,i){let o=await R(),c=i.length,u=new o.VectorInt;u.resize(c,0);let h=new o.VectorDouble;h.resize(c,0);for(let y=0;y<c;++y)h.set(y,i[y]),(i[y]===void 0||i[y]===null)&&u.set(y,1);let p=o.naturalBreaks(a,h,u);return re(p)}export{Hn as DistanceUnit,Lt as SpatialJoinType,eo as createGeoDaPointsFromBinaryFeatures,Fo as getBufferSync,Nn as getBuffersSync,ho as getCentroid,mo as getCentroids,Co as getDistanceBasedNeighbors,_o as getDistanceThresholds,Z as getGeoDa,yo as getGeojsonCentroids,to as getNearestNeighbors,R as initGeoDa,ro as localMoran,oo as naturalBreaks,Qn as parallelSpatialJoin,no as quantileBreaks,zn as resetGeoDa,Bn as setGeoDa,Zn as spatialCount,qn as spatialJoin,Yn as spatialMerge,Jt as spatialMergeSync};
//# sourceMappingURL=index.js.map
