\doxysection{Power\+Lag.\+h}
\hypertarget{_power_lag_8h_source}{}\label{_power_lag_8h_source}\index{/Users/xun/github/geoda-\/lib/src/cpp/regression/PowerLag.h@{/Users/xun/github/geoda-\/lib/src/cpp/regression/PowerLag.h}}
\mbox{\hyperlink{_power_lag_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ \_\_GEODA\_CENTER\_POWER\_LAG\_H\_\_}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ \_\_GEODA\_CENTER\_POWER\_LAG\_H\_\_}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lite2_8h}{lite2.h}}"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{comment}{/*}}
\DoxyCodeLine{00007\ \textcolor{comment}{RowMultiply}}
\DoxyCodeLine{00008\ \textcolor{comment}{product\ is\ a\ row-\/vector,\ that\ results\ from\ vector\ (row)\ and}}
\DoxyCodeLine{00009\ \textcolor{comment}{sparse\ matrix\ (mt)\ multiplication.}}
\DoxyCodeLine{00010\ \textcolor{comment}{Assumes\ all\ objects\ already\ exist.}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ template\ <class\ R>}}
\DoxyCodeLine{00013\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_power_lag_8h_a15d397a6439196ca8dfc13a97984460f}{RowMultiply}}(\mbox{\hyperlink{class_iterator}{Iterator<VALUE>}}\ row,\ \mbox{\hyperlink{class_iterator}{Iterator<WMap>}}\ mt,\ \mbox{\hyperlink{class_vector}{Vector<VALUE>}}\ \&\mbox{\hyperlink{mix_8cpp_aa298203c6e86eac70ac4a07936ae425b}{product}})\ \{}
\DoxyCodeLine{00014\ \ \ \mbox{\hyperlink{lite2_8h_ac6885dbfb371c33e523c7fb046118b36}{INDEX}}\ dim\ =\ mt.\mbox{\hyperlink{class_iterator_afd338869f80ec5af59561f9aeae65b21}{count}}();}
\DoxyCodeLine{00015\ \ \ \mbox{\hyperlink{mix_8cpp_aa298203c6e86eac70ac4a07936ae425b}{product}}.reset();}
\DoxyCodeLine{00016\ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{lite2_8h_ac6885dbfb371c33e523c7fb046118b36}{INDEX}}\ cp\ =\ 0;\ cp\ <\ dim;\ ++cp)\ \mbox{\hyperlink{mix_8cpp_aa298203c6e86eac70ac4a07936ae425b}{product}}\ <<\ 0;}
\DoxyCodeLine{00017\ \ \ \textcolor{keywordflow}{for}\ (;\ mt;\ ++mt,\ ++row)\ \{}
\DoxyCodeLine{00018\ \ \ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ RowValue\ =\ *row;}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keywordflow}{if}\ (RowValue)\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{class_vector_a12449554072b5e05998c3e5607dcc2e3}{WMap::input\_iterator}}\ it\ =\ (*mt)();\ it;\ ++it)\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{mix_8cpp_aa298203c6e86eac70ac4a07936ae425b}{product}}[(*it).first]\ +=\ (*it).second\ *\ RowValue;}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00023\ \ \ \ \ \}}
\DoxyCodeLine{00024\ \ \ \}}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00026\ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{comment}{/*}}
\DoxyCodeLine{00029\ \textcolor{comment}{PowerLag}}
\DoxyCodeLine{00030\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00031\ \textcolor{comment}{//\ template\ <class\ R>}}
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_power_lag_a7b26d068a2fe166b38ab9ed307b95cb2}{PowerLag}}\ \{}
\DoxyCodeLine{00033\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00034\ \ \ \mbox{\hyperlink{class_power_lag_a7b26d068a2fe166b38ab9ed307b95cb2}{PowerLag}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_iterator}{Iterator<WMap>}}\ matrix,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{lite2_8h_ac6885dbfb371c33e523c7fb046118b36}{INDEX}}\ vsize);}
\DoxyCodeLine{00035\ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ \mbox{\hyperlink{class_power_lag_aac78c8b85bf9e9b2cebe0101be5238e5}{Init}}();}
\DoxyCodeLine{00036\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_power_lag_a5191b9966745f7d382fd21f5b454c227}{AdvanceLag}}();}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ \mbox{\hyperlink{class_power_lag_a8bc05997c93fa811849c5ed9e77dd4c9}{SparseRowLag}}();}
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ \mbox{\hyperlink{class_power_lag_ab241075e258a1f4d8470562fd7e2b780}{SparseColumnLag}}();}
\DoxyCodeLine{00040\ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ \mbox{\hyperlink{class_power_lag_a45e047a78001ff390ae483f9e42ea3a4}{DenseRowLag}}()\ \{}
\DoxyCodeLine{00041\ \ \ \ \ LastWasRow\ =\ 1;}
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{_power_lag_8h_a15d397a6439196ca8dfc13a97984460f}{RowMultiply}}(RowLag(),\ mt,\ Row);}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{lite2_8h_a7dd6ec971b6f46098cb10e81b3fb0e9c}{Product}}(Row(),\ ColumnLag());}
\DoxyCodeLine{00044\ \ \ \};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ \mbox{\hyperlink{class_power_lag_a2123f6e5fb5372b11590e2bd9cf0baee}{DenseColumnLag}}()\ \{}
\DoxyCodeLine{00047\ \ \ \ \ LastWasRow\ =\ 0;}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{lite2_8h_af2d4a6e9c58b3995943f051b2b709bb1}{ColumnMultiply}}(ColumnLag(),\ mt,\ Column);}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{class_power_lag_a5191b9966745f7d382fd21f5b454c227}{AdvanceLag}}();}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{lite2_8h_a7dd6ec971b6f46098cb10e81b3fb0e9c}{Product}}(RowLag(),\ ColumnLag());}
\DoxyCodeLine{00051\ \ \ \};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \mbox{\hyperlink{lite2_8h_aa0b03826c8f7cc324ac2db0ada2dce0a}{VALUE}}\ \mbox{\hyperlink{class_power_lag_aba86f6228fe473b73c264c8dc92da290}{ComputeLag}}()\ \{}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{if}\ (NonZero.count()\ <\ LongLength)\ \ \textcolor{comment}{//\ do\ sparse\ lag}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ LastWasRow\ ?\ \mbox{\hyperlink{class_power_lag_ab241075e258a1f4d8470562fd7e2b780}{SparseColumnLag}}()\ :\ \mbox{\hyperlink{class_power_lag_a8bc05997c93fa811849c5ed9e77dd4c9}{SparseRowLag}}();}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{if}\ (!LongInit)\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (LastWasRow)\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_power_lag_ab241075e258a1f4d8470562fd7e2b780}{SparseColumnLag}}();\ \ \textcolor{comment}{//\ last\ time\ do\ sparse}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{lite2_8h_ac6885dbfb371c33e523c7fb046118b36}{INDEX}}\ cnt\ =\ 0;\ cnt\ <\ Dim;\ ++cnt)}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (OrderLag[cnt]\ !=\ LastOrder)\ RowLag[cnt]\ =\ ColumnLag[cnt]\ =\ 0;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ LongInit\ =\ 1;}
\DoxyCodeLine{00061\ \ \ \ \ \};}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{return}\ LastWasRow\ ?\ \mbox{\hyperlink{class_power_lag_a2123f6e5fb5372b11590e2bd9cf0baee}{DenseColumnLag}}()\ :\ \mbox{\hyperlink{class_power_lag_a45e047a78001ff390ae483f9e42ea3a4}{DenseRowLag}}();}
\DoxyCodeLine{00063\ \ \ \};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00066\ \ \ \mbox{\hyperlink{lite2_8h_ae9d1896edbd59cd55628634470738d01}{WVector}}\ RowLag,\ Row,\ ColumnLag,\ Column;}
\DoxyCodeLine{00067\ \ \ \mbox{\hyperlink{class_vector}{Vector<INDEX>}}\ OrderLag,\ Order,\ NonZero;}
\DoxyCodeLine{00068\ \ \ \textcolor{keywordtype}{bool}\ LastWasRow,\ LongInit;}
\DoxyCodeLine{00069\ \ \ \mbox{\hyperlink{lite2_8h_ac6885dbfb371c33e523c7fb046118b36}{INDEX}}\ LastOrder,\ Dim,\ LongLength;}
\DoxyCodeLine{00070\ \ \ \mbox{\hyperlink{class_iterator}{Iterator<WMap>}}\ mt;}
\DoxyCodeLine{00071\ \};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
